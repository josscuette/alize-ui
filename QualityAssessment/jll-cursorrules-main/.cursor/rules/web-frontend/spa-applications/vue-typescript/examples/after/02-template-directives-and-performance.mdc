---
description: Template Directives and Performance After Example
globs: [],
alwaysApply: false,
---

```vue
<!-- ✅ GOOD EXAMPLE - Follows Template Directive Best Practices -->
<template>
  <div class="user-list">
    <h2 class="user-list__title">Active Users</h2>
    
    <!-- ✅ GOOD: Proper :key with v-for -->
    <div 
      v-for="user in users" 
      :key="user.id" 
      class="user-item"
    >
      <span class="user-item__name">{{ user.name }}</span>
    </div>

    <!-- ✅ GOOD: Separated v-if and v-for using computed property -->
    <li 
      v-for="user in activeUsers" 
      :key="user.id" 
      class="active-user"
    >
      {{ user.name }} - {{ user.email }}
    </li>

    <!-- ✅ GOOD: Simple expression using computed property -->
    <div class="user-stats">
      Total Active: {{ activeVerifiedCount }}
    </div>

    <!-- ✅ GOOD: Stable references for props -->
    <UserCard 
      v-for="user in users"
      :key="user.id"
      :user="user"
      :config="stableConfig"
      @click="handleUserClick"
      @edit="handleUserEdit"
    />

    <!-- ✅ GOOD: Multi-line attributes with consistent ordering -->
    <button 
      v-show="canAdd"
      :disabled="loading"
      :style="buttonStyles"
      class="user-list__add-button"
      @click="addUser"
    >
      Add User
    </button>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue';
import UserCard from './UserCard.vue';

interface User {
  id: string;
  name: string;
  email: string;
  isActive: boolean;
  verified: boolean;
}

const users = ref<User[]>([
  { id: '1', name: 'John', email: 'john@example.com', isActive: true, verified: true },
  { id: '2', name: 'Jane', email: 'jane@example.com', isActive: false, verified: true },
]);

const loading = ref(false);
const canAdd = ref(true);

// ✅ GOOD: Computed property for filtered data (better performance)
const activeUsers = computed(() => 
  users.value.filter(user => user.isActive)
);

// ✅ GOOD: Computed property for complex calculations
const activeVerifiedCount = computed(() => 
  users.value.filter(user => user.isActive && user.verified).length
);

// ✅ GOOD: Stable config object (won't cause unnecessary re-renders)
const stableConfig = {
  theme: 'dark',
  showAvatar: true
} as const;

// ✅ GOOD: Stable computed styles
const buttonStyles = computed(() => ({
  backgroundColor: loading.value ? '#6c757d' : '#007bff',
  color: 'white',
  opacity: loading.value ? 0.6 : 1
}));

// ✅ GOOD: Stable event handlers (won't cause child re-renders)
const handleUserClick = (user: User) => {
  console.log('Clicked:', user.name);
};

const handleUserEdit = (user: User) => {
  console.log('Edit:', user.name);
};

const addUser = () => {
  const newUser: User = {
    id: Date.now().toString(),
    name: 'New User',
    email: 'new@example.com',
    isActive: true,
    verified: false
  };
  users.value.push(newUser);
};
</script>

<style scoped>
/* ✅ GOOD: Scoped styles with BEM naming */
.user-list {
  padding: 1.25rem;
  background: #f8f9fa;
  border-radius: 8px;
}

.user-list__title {
  margin: 0 0 1rem 0;
  color: #333;
  font-size: 1.5rem;
}

.user-list__add-button {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 4px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.user-list__add-button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.user-list__add-button:disabled {
  cursor: not-allowed;
}

.user-item {
  margin: 0.75rem 0;
  padding: 0.5rem;
  background: white;
  border-radius: 4px;
  border-left: 3px solid #007bff;
}

.user-item__name {
  font-weight: 500;
  color: #333;
}

.active-user {
  list-style: none;
  padding: 0.5rem;
  margin: 0.5rem 0;
  background: #d4edda;
  border-radius: 4px;
  color: #155724;
}

.user-stats {
  margin: 1rem 0;
  padding: 0.75rem;
  background: #e9ecef;
  border-radius: 4px;
  font-weight: 500;
  color: #495057;
}
</style>
```